<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>CRO CRM - Ø¥Ø¶Ø§ÙØ© ØªØ§Ø³Ùƒ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  * { box-sizing: border-box; margin:0; padding:0; }
  body { font-family: 'Cairo', Arial, sans-serif; background: linear-gradient(135deg, #1e40af, #9333ea); color: #333; min-height: 100vh; padding:20px; }
  .container { max-width: 1000px; margin: 40px auto; padding: 20px; }
  h2 { text-align: center; color: #fff; font-size: 32px; margin-bottom: 30px; }
  
  .card {
    background: #fff; 
    border-radius: 12px; 
    padding: 25px; 
    margin-bottom: 20px; 
    box-shadow: 0 6px 18px rgba(0,0,0,0.15);
  }

  .card h3 { color: #1e40af; margin-bottom: 15px; font-size: 22px; border-bottom: 1px solid #ddd; padding-bottom: 5px; }

  label { font-weight:600; margin-bottom:5px; display:block; }

  input, select, textarea {
    width: 100%; padding: 12px; margin-bottom: 15px; border-radius: 8px; border: 1px solid #ccc; font-size: 15px;
    transition: 0.3s;
  }
  input:focus, select:focus, textarea:focus { border-color: #9333ea; box-shadow: 0 0 8px rgba(147,51,234,0.3); outline:none; }

  button {
    display: block; width: 100%; padding: 14px; 
    background: linear-gradient(135deg,#1e40af,#9333ea); 
    color: #fff; font-size: 18px; font-weight: 600; border:none; border-radius: 10px; cursor:pointer;
    transition: 0.3s;
  }
  button:hover { opacity: 0.9; transform: translateY(-2px); }

  @media(max-width:768px){
    h2 { font-size: 26px; }
    .card h3 { font-size: 20px; }
  }
</style>
</head>
<body>
<div class="container">
  <h2>ğŸš€ CRO CRM - Ø¥Ø¶Ø§ÙØ© ØªØ§Ø³Ùƒ Ø¬Ø¯ÙŠØ¯</h2>

  <!-- Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª -->
  <div class="card">
    <h3>Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª</h3>
    <label>Responsible SEO</label>
    <select id="seo" required>
      <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</option>
      <option value="Mohamed Metwally">Mohamed Metwally</option>
      <option value="elarbey">elarbey</option>
      <option value="Marketing">Marketing</option>
    </select>

    <label>Responsible account manager</label>
    <select id="manager" required>
      <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</option>
      <option value="Mohamed Metwaly">Mohamed Metwaly</option>
      <option value="Reem">Reem</option>
    </select>

    <label>Company Name</label>
    <input type="text" id="company" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©" required>
  </div>

  <!-- ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ§Ø³Ùƒ -->
  <div class="card">
    <h3>ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ§Ø³Ùƒ</h3>
    <label>Task Type</label>
    <select id="taskType" required>
      <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªØ§Ø³Ùƒ</option>
      <option value="UI salla">UI salla</option>
      <option value="Wordpress Creation">Wordpress Creation</option>
    </select>

    <label>Type of theme</label>
    <input type="text" id="theme" placeholder="Ø§Ø³Ù… Ø§Ù„Ø«ÙŠÙ…" required>

    <label>Website link</label>
    <input type="url" id="website" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹" required>

    <label>Client Name</label>
    <input type="text" id="client" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„" required>

    <label>Upload Folder of UI</label>
    <input type="file" id="folder" multiple required>

    <label>Seo Notes</label>
    <textarea id="seoNotes" rows="4" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª SEO"></textarea>

    <label>Client Products</label>
    <select id="products" required>
      <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</option>
      <option value="Ø¯Ø±ÙˆØ¨ Ø´ÙˆØ¨ÙŠÙ†Ø¬">Ø¯Ø±ÙˆØ¨ Ø´ÙˆØ¨ÙŠÙ†Ø¬</option>
      <option value="Ø®Ø§ØµØ©">Ø®Ø§ØµØ©</option>
      <option value="Ø±Ù‚Ù…ÙŠØ©">Ø±Ù‚Ù…ÙŠØ©</option>
      <option value="Ø®Ø¯Ù…Ø§Øª">Ø®Ø¯Ù…Ø§Øª</option>
      <option value="Niche store">Niche store</option>
    </select>

    <label>Keep new theme version?</label>
    <select id="keepTheme" required>
      <option value="">Ø§Ø®ØªØ±</option>
      <option value="yes">Yes</option>
      <option value="no">No</option>
    </select>

    <label>Version Name to keep</label>
    <input type="text" id="versionName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù†Ø³Ø®Ø©">
  </div>

  <!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
  <div class="card">
    <h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
    <label>Access (email)</label>
    <input type="email" id="access" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>

    <label>Password</label>
    <input type="text" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>

    <label>Screen Shots</label>
    <input type="file" id="screenshots" multiple required>
  </div>

  <button id="submitBtn">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØ§Ø³Ùƒ</button>
</div>

<script>
document.getElementById('submitBtn').addEventListener('click', async function(e){
  e.preventDefault();

  let now = new Date();
  let deadline = new Date();
  if(now.getHours() < 12){
    deadline.setHours(deadline.getHours() + 24);
  }

  // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØªØ­ÙˆÙŠÙ„Ù‡Ø§ Base64
  async function encodeFile(file){
    return new Promise((resolve) => {
      let reader = new FileReader();
      reader.onload = () => {
        let base64 = reader.result.split(',')[1];
        resolve({
          name: file.name,
          mimeType: file.type,
          data: base64
        });
      };
      reader.readAsDataURL(file);
    });
  }

  let screenshots = document.getElementById('screenshots').files;
  let uiFolder = document.getElementById('folder').files;
  let allFiles = [...screenshots, ...uiFolder];
  let encodedFiles = await Promise.all([...allFiles].map(f => encodeFile(f)));

  let taskData = {
    seo: document.getElementById('seo').value,
    manager: document.getElementById('manager').value,
    company: document.getElementById('company').value,
    taskType: document.getElementById('taskType').value,
    theme: document.getElementById('theme').value,
    website: document.getElementById('website').value,
    client: document.getElementById('client').value,
    seoNotes: document.getElementById('seoNotes').value,
    products: document.getElementById('products').value,
    keepTheme: document.getElementById('keepTheme').value,
    versionName: document.getElementById('versionName').value,
    access: document.getElementById('access').value,
    password: document.getElementById('password').value,
    createdAt: now.toLocaleString(),
    deadline: deadline.toLocaleString(),
    files: encodedFiles
  };

  fetch("https://script.google.com/macros/s/AKfycbzzVJ4STWLqVLurwCKbIUfo_U7PT2UYjtnQpl-znxAv6XSgS0rvg-JR594t7A-vpVCg/exec", {
    method: "POST",
    contentType: "application/json",
    body: JSON.stringify(taskData)
  }).then(r => r.json())
    .then(res => {
      alert("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØ§Ø³Ùƒ ÙˆØ±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª!\nÙ„ÙŠÙ†ÙƒØ§Øª Ø§Ù„Ù…Ù„ÙØ§Øª:\n" + res.links.join("\n"));
    }).catch(err => {
      console.error(err);
      alert("âŒ Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
    });
});
</script>
</body>
</html>
